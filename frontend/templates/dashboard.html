{% load static %}

<!DOCTYPE html>

<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tableau de bord - DigiStore</title>
    <link rel="stylesheet" href="{% static 'css/index.css' %}">
    <link rel="stylesheet" href="{% static 'css/dashboard.css' %}">

</head>

<body>

    <div class="dashboard-container">

        <div class="sidebar-overlay" id="sidebarOverlay"></div>

        <aside class="sidebar" id="sidebar">

            <div class="sidebar-header">

                <a href="{% url 'index' %}" class="logo">
                    <span class="logo-icon">üõçÔ∏è</span>
                    DigiStore
                </a>

            </div>

            <nav class="sidebar-nav">

                <a href="#" class="nav-item active" data-section="overview">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <rect x="3" y="3" width="7" height="7"></rect>
                        <rect x="14" y="3" width="7" height="7"></rect>
                        <rect x="14" y="14" width="7" height="7"></rect>
                        <rect x="3" y="14" width="7" height="7"></rect>
                    </svg>
                    <span>Aper√ßu</span>
                </a>

                <a href="#" class="nav-item" data-section="products">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"></path>
                    </svg>
                    <span>Produits</span>
                </a>

                <a href="#" class="nav-item" data-section="shop-settings">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="3"></circle>
                        <path d="M12 1v6m0 6v6m6-12h-6m6 6h-6m6 6h-6m-6-6H0m6 0H0m6-6H0"></path>
                    </svg>
                    <span>Param√®tres boutique</span>
                </a>

            </nav>

            <div class="sidebar-footer">

                <button class="logout-btn" id="logoutBtn">

                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
                        <polyline points="16 17 21 12 16 7"></polyline>
                        <line x1="21" y1="12" x2="9" y2="12"></line>
                    </svg>

                    <span>D√©connexion</span>

                </button>

            </div>

        </aside>

        <main class="main-content">

            <header class="dashboard-header">

                <button class="mobile-sidebar-toggle" id="mobileSidebarToggle">
                    <span></span>
                    <span></span>
                    <span></span>
                </button>

                <div class="header-info">
                    <h1 id="sectionTitle">Aper√ßu du tableau de bord</h1>
                    <p id="sectionSubtitle">G√©rez votre boutique et vos produits</p>
                </div>

                <div class="header-actions">

                    <a href="{% url 'shop' %}" class="btn btn-outline" target="_blank">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path>
                            <polyline points="15 3 21 3 21 9"></polyline>
                            <line x1="10" y1="14" x2="21" y2="3"></line>
                        </svg>
                        <span>Voir la boutique</span>
                    </a>

                </div>

            </header>

            <div class="content-sections">
                <!-- Section Aper√ßu -->
                <section class="content-section active" id="overview-section">
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-icon">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"></path>
                                </svg>
                            </div>
                            <div class="stat-info">
                                <div class="stat-label">Produits totaux</div>
                                <div class="stat-value" id="totalProducts">{{ product_length }}</div>
                            </div>
                        </div>

                        <div class="stat-card">
                            <div class="stat-icon">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                                    <circle cx="12" cy="12" r="3"></circle>
                                </svg>
                            </div>
                            <div class="stat-info">
                                <div class="stat-label">Visites boutique</div>
                                <div class="stat-value">--</div>
                            </div>
                        </div>
<!-- 
                        <div class="stat-card">
                            <div class="stat-icon">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <rect x="3" y="3" width="7" height="7"></rect>
                                    <rect x="14" y="3" width="7" height="7"></rect>
                                    <rect x="14" y="14" width="7" height="7"></rect>
                                    <rect x="3" y="14" width="7" height="7"></rect>
                                </svg>
                            </div>
                            <div class="stat-info">
                                <div class="stat-label">Cat√©gories</div>
                                <div class="stat-value" id="totalCategories">0</div>
                            </div>
                        </div> -->
                    </div>

                    <div class="shop-link-card">
                        <div class="shop-link-header">
                            <div>
                                <h3>Lien de votre boutique</h3>
                                <p>Partagez ce lien avec vos clients</p>
                            </div>
                            <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path>
                                <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path>
                            </svg>
                        </div>
                        <div class="shop-link-input-group">
                            <input type="text" id="shopLinkInput" readonly>
                            <button class="copy-link-btn" id="copyLinkBtn">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                                    <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                                </svg>
                                <span>Copier le lien</span>
                            </button>
                        </div>
                        <div class="copy-success" id="copySuccess">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="20 6 9 17 4 12"></polyline>
                            </svg>
                            <span>Lien copi√© dans le presse-papiers !</span>
                        </div>
                    </div>

                    <div class="quick-actions">
                        <h2>Actions rapides</h2>
                        <div class="action-cards">
                            <button class="action-card" onclick="switchSection('products')">
                                <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <line x1="12" y1="5" x2="12" y2="19"></line>
                                    <line x1="5" y1="12" x2="19" y2="12"></line>
                                </svg>
                                <span>Ajouter un produit</span>
                            </button>
                            <button class="action-card" onclick="switchSection('shop-settings')">
                                <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <circle cx="12" cy="12" r="3"></circle>
                                    <path d="M12 1v6m0 6v6"></path>
                                </svg>
                                <span>Modifier les infos</span>
                            </button>
                            <a href="{% url 'shop' %}" class="action-card" target="_blank">
                                <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path>
                                    <polyline points="15 3 21 3 21 9"></polyline>
                                    <line x1="10" y1="14" x2="21" y2="3"></line>
                                </svg>
                                <span>Voir ma boutique</span>
                            </a>
                        </div>
                    </div>
                </section>

                <!-- Section Produits -->
                <section class="content-section" id="products-section">
                    <div class="section-actions">
                        <button class="btn btn-primary" id="addProductBtn">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <line x1="12" y1="5" x2="12" y2="19"></line>
                                <line x1="5" y1="12" x2="19" y2="12"></line>
                            </svg>
                            <span>Ajouter un produit</span>
                        </button>
                    </div>

                    <div class="products-table-container">
                        <table class="products-table" id="productsTable">
                            <thead>
                                <tr>
                                    <th>Produit</th>
                                    <th>Cat√©gorie</th>
                                    <th>Description</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="productsTableBody">
                                <!-- Les produits seront charg√©s ici -->
                            </tbody>
                        </table>

                        <div class="empty-state" id="emptyProducts" style="display: none;">
                            <svg width="80" height="80" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                                <path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"></path>
                            </svg>
                            <h3>Aucun produit pour l'instant</h3>
                            <p>Commencez √† ajouter des produits √† votre boutique</p>
                            <button class="btn btn-primary" onclick="document.getElementById('addProductBtn').click()">
                                Ajouter le premier produit
                            </button>
                        </div>
                    </div>
                </section>

                <!-- Section Param√®tres -->
                <section class="content-section" id="shop-settings-section">
                    <form class="settings-form" id="shopSettingsForm">
                        <div class="form-group">
                            <label for="settingsShopName">Nom de la boutique</label>
                            <input type="text" id="settingsShopName" name="shopName" required>
                        </div>

                        <div class="form-group">
                            <label for="settingsCategory">Cat√©gorie</label>
                            <select id="settingsCategory" name="category" required>
                                <option value="fashion">Mode & V√™tements</option>
                                <option value="electronics">√âlectronique</option>
                                <option value="food">Alimentation & Boissons</option>
                                <option value="beauty">Beaut√© & Cosm√©tiques</option>
                                <option value="home">Maison & Jardin</option>
                                <option value="sports">Sports & Fitness</option>
                                <option value="books">Livres & Fournitures</option>
                                <option value="toys">Jouets & Jeux</option>
                                <option value="jewelry">Bijoux & Accessoires</option>
                                <option value="health">Sant√© & Bien-√™tre</option>
                                <option value="automotive">Automobile</option>
                                <option value="arts">Art & Artisanat</option>
                                <option value="other">Autre</option>
                            </select>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label for="settingsWhatsapp">Num√©ro WhatsApp</label>
                                <input type="tel" id="settingsWhatsapp" name="whatsapp" placeholder="+237 XXX XXX XXX" required>
                            </div>

                            <div class="form-group">
                                <label for="settingsLocation">Localisation</label>
                                <input type="text" id="settingsLocation" name="location" placeholder="Ville, Pays" required>
                            </div>
                        </div>

                        <button type="submit" class="btn btn-primary">
                            Enregistrer les modifications
                        </button>
                    </form>
                </section>
            </div>
        </main>
    </div>

    <!-- Modal Ajouter/Modifier un Produit -->
    <div class="modal" id="productModal">
        <div class="modal-overlay" id="modalOverlay"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modalTitle">Ajouter un produit</h2>
                <button class="modal-close" id="modalClose">&times;</button>
            </div>
            <form class="modal-form" id="productForm">
                <input type="hidden" id="productId" name="productId">

                <div class="form-group">
                    <label for="productName">Nom du produit</label>
                    <input type="text" id="productName" name="name" placeholder="Entrez le nom du produit" required>
                </div>

                <div class="form-group">
                    <label for="productCategory">Cat√©gorie</label>
                    <input type="text" id="productCategory" name="category" placeholder="ex. √âlectronique, V√™tements" required>
                </div>

                <div class="form-group">
                    <label for="productDescription">Description</label>
                    <textarea id="productDescription" name="description" placeholder="D√©crivez votre produit..." rows="4" required></textarea>
                </div>

                <div class="form-group">
                    <label for="productImage">Image du produit (Optionnel)</label>
                    <input type="file" id="productImage" name="image" accept="image/*">
                    <div class="form-helper">T√©l√©chargez une image pour attirer plus de clients</div>
                </div>

                <div class="modal-actions">
                    <button type="button" class="btn btn-outline" onclick="closeProductModal()">Annuler</button>
                    <button type="submit" class="btn btn-primary">Enregistrer le produit</button>
                </div>
            </form>
        </div>
    </div>

    <script src="{% static 'js/dashboard.js' %}"></script>
</body>
</html>
